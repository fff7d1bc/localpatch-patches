From 69aeeac1beb3278a458fa8e5809bbdb1bab25a34 Mon Sep 17 00:00:00 2001
From: nowrep <nowrep@gmail.com>
Date: Fri, 13 Jul 2012 18:00:03 +0200
Subject: [PATCH] Fixed zooming with Ctrl+wheel for some users.

closes #451
---
 src/lib/tools/buttonwithmenu.cpp |    4 +---
 src/lib/webview/webview.cpp      |   10 ++--------

diff --git a/src/lib/tools/buttonwithmenu.cpp b/src/lib/tools/buttonwithmenu.cpp
index 8ff8a7a..5a8589c 100644
--- a/src/lib/tools/buttonwithmenu.cpp
+++ b/src/lib/tools/buttonwithmenu.cpp
@@ -108,9 +108,7 @@ void ButtonWithMenu::wheelEvent(QWheelEvent* event)
         return;
     }
 
-    int numDegrees = event->delta() / 8;
-    int numSteps = numDegrees / 15;
-    if (numSteps == 1) {
+    if (event->delta() > 0) {
         if (currItemIndex != 0) {
             setCurrentItem(m_items.at(currItemIndex - 1));
         }
diff --git a/src/lib/webview/webview.cpp b/src/lib/webview/webview.cpp
index d296d92..1810515 100644
--- a/src/lib/webview/webview.cpp
+++ b/src/lib/webview/webview.cpp
@@ -952,15 +952,9 @@ void WebView::wheelEvent(QWheelEvent* event)
     }
 
     if (event->modifiers() & Qt::ControlModifier) {
-        int numDegrees = event->delta() / 8;
-        int numSteps = numDegrees / 15;
-        if (numSteps == 1) {
-            zoomIn();
-        }
-        else {
-            zoomOut();
-        }
+        event->delta() > 0 ? zoomIn() : zoomOut();
         event->accept();
+
         return;
     }
 
-- 
1.7.8.6

